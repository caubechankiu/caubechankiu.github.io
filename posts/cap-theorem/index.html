<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>CAP Theorem - caubechankiu's miscellaneous notes</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Hiểu đúng về sự đánh đổi trong hệ thống phân tán. Định lý CAP (CAP Theorem) là một nguyên tắc quan trọng trong lĩnh vực hệ thống phân tán, được nhà khoa học máy tính Eric Brewer đề xuất vào năm 2000"><meta property="og:image" content><meta property="og:url" content="https://caubechankiu.github.io/posts/cap-theorem/"><meta property="og:site_name" content="caubechankiu's miscellaneous notes"><meta property="og:title" content="CAP Theorem"><meta property="og:description" content="Hiểu đúng về sự đánh đổi trong hệ thống phân tán. Định lý CAP (CAP Theorem) là một nguyên tắc quan trọng trong lĩnh vực hệ thống phân tán, được nhà khoa học máy tính Eric Brewer đề xuất vào năm 2000"><meta property="og:locale" content="vi_VN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-02T10:43:32+07:00"><meta property="article:modified_time" content="2021-04-02T10:43:32+07:00"><meta property="article:tag" content="Distributed System"><meta property="article:tag" content="Database"><meta name=twitter:card content="summary"><meta name=twitter:title content="CAP Theorem"><meta name=twitter:description content="Hiểu đúng về sự đánh đổi trong hệ thống phân tán. Định lý CAP (CAP Theorem) là một nguyên tắc quan trọng trong lĩnh vực hệ thống phân tán, được nhà khoa học máy tính Eric Brewer đề xuất vào năm 2000"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://caubechankiu.github.io/css/main.6a0f23ea50fd34b46fee262a5a68e17d458c51a2bc99ba1ba018065de6b180c3.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://caubechankiu.github.io/css/dark.50b57e12d401420df23965fed157368aba37b76df0ecefd0b1ecd4da664f01a0.css disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><link rel=stylesheet type=text/css href=https://caubechankiu.github.io/css/archie.90f4a1321261c2df9485c29a7877582160bb95d018fefaa5f2199bccf7b169f5.css></head><body><div class=content><header><div class=main><a href=https://caubechankiu.github.io/>caubechankiu's miscellaneous notes</a></div><nav><a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/tags>Tags</a>
| <span id=dark-mode-toggle onclick=toggleTheme()><svg class="feather"><use href="https://unpkg.com/feather-icons@4.29.2/dist/feather-sprite.svg#sun"/></svg></span>
<script src=https://caubechankiu.github.io/js/themetoggle.js></script></nav></header><main><article><div class=post-container><div class=post-content><div class=title><h1 class=title>CAP Theorem</h1><div class=meta>Posted on Apr 2, 2021</div></div><section class=body><p>Hiểu đúng về sự đánh đổi trong hệ thống phân tán.</p><h2 id=1-định-lý-cap-là-gì>1. Định lý CAP là gì?</h2><p>Định lý CAP (CAP Theorem) là một nguyên tắc quan trọng trong lĩnh vực hệ thống phân tán, được nhà khoa học máy tính Eric Brewer đề xuất vào năm 2000. Định lý này khẳng định rằng trong một hệ thống phân tán, ta không thể đồng thời đạt được cả ba yếu tố sau đây:</p><ul><li><strong>Consistency (Nhất quán):</strong> Mọi node trong hệ thống luôn có cùng một trạng thái dữ liệu tại một thời điểm bất kỳ.</li><li><strong>Availability (Sẵn sàng):</strong> Hệ thống luôn phản hồi mọi yêu cầu đọc/ghi ngay cả khi một số node bị lỗi.</li><li><strong>Partition Tolerance (Khả năng chịu phân vùng):</strong> Hệ thống tiếp tục hoạt động ngay cả khi có sự cố mạng khiến một số node không thể liên lạc với nhau.
<img src=image2.png alt></li></ul><h2 id=2-ý-nghĩa-của-định-lý-cap>2. Ý nghĩa của định lý CAP</h2><p>Vì không thể đạt được cả ba yếu tố trên cùng lúc, các hệ thống phân tán phải lựa chọn hai trong ba thuộc tính này. Điều này dẫn đến ba mô hình phổ biến:</p><ul><li><strong>CP (Consistency + Partition Tolerance):</strong> Hệ thống đảm bảo tính nhất quán và chịu được phân vùng, nhưng có thể không sẵn sàng khi xảy ra lỗi mạng.</li><li><strong>AP (Availability + Partition Tolerance):</strong> Hệ thống đảm bảo luôn phản hồi yêu cầu và chịu được phân vùng, nhưng có thể trả về dữ liệu cũ hoặc không nhất quán.</li><li><strong>CA (Consistency + Availability):</strong> Hệ thống đảm bảo cả tính nhất quán và sẵn sàng, nhưng không thể chịu được lỗi phân vùng. Tuy nhiên, trong môi trường thực tế, không có hệ thống phân tán nào hoàn toàn thuộc mô hình CA vì phân vùng mạng là điều không thể tránh khỏi.</li></ul><figure class=center><img src=/posts/cap-theorem/image1.png width=500px></figure><h2 id=3-ứng-dụng-thực-tế-của-định-lý-cap>3. Ứng dụng thực tế của định lý CAP</h2><p>Khi thiết kế hệ thống phân tán, ta phải đưa ra quyết định dựa trên ưu tiên của ứng dụng:</p><ul><li>Nếu yêu cầu dữ liệu luôn phải chính xác (ví dụ: hệ thống ngân hàng), ta cần ưu tiên <strong>CP</strong>.</li><li>Nếu hệ thống cần đảm bảo phản hồi nhanh (ví dụ: mạng xã hội, hệ thống gợi ý), ta có thể chọn <strong>AP</strong>.</li><li>Nếu hệ thống chạy trên một trung tâm dữ liệu duy nhất và có độ tin cậy cao, mô hình <strong>CA</strong> có thể là một lựa chọn hợp lý.</li></ul><h2 id=4-ví-dụ-về-các-hệ-quản-trị-cơ-sở-dữ-liệu-phổ-biến>4. Ví dụ về các hệ quản trị cơ sở dữ liệu phổ biến</h2><p>Dưới đây là một số ví dụ về cách các hệ quản trị cơ sở dữ liệu hiện đại áp dụng định lý CAP:</p><ul><li><strong>MongoDB (AP hoặc CP, tùy vào cấu hình):</strong> Theo mặc định, MongoDB ưu tiên tính sẵn sàng và khả năng chịu phân vùng (AP). Tuy nhiên, nếu bật chế độ write concern và read concern cao hơn, MongoDB có thể hoạt động theo mô hình CP.</li><li><strong>Cassandra (AP hoặc CP, tùy vào cấu hình):</strong> Cassandra thường được xem là một hệ thống AP, nhưng có thể được cấu hình để hoạt động gần với mô hình CP bằng cách điều chỉnh mức độ nhất quán (<code>QUORUM</code>, <code>ALL</code>). Nếu yêu cầu xác nhận từ đa số các node trong cả đọc và ghi, Cassandra sẽ ưu tiên tính nhất quán hơn nhưng có thể ảnh hưởng đến tính sẵn sàng.</li><li><strong>MySQL (CA khi chạy độc lập, CP với Galera Cluster):</strong> MySQL khi chạy đơn lẻ thì đảm bảo CA, nhưng khi sử dụng Galera Cluster, nó có thể hoạt động theo mô hình CP bằng cách đồng bộ dữ liệu giữa các node.</li><li><strong>DynamoDB (AP):</strong> Amazon DynamoDB ưu tiên tính sẵn sàng và khả năng chịu phân vùng, chấp nhận một mức độ nhất quán thấp hơn.</li></ul></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/distributed-system>distributed system</a></li><li><a href=/tags/database>database</a></li></ul></nav></div></div></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/caubechankiu rel=me title=GitHub><svg class="feather"><use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#github"/></svg></a><a class=border></a><a class=soc href=https://www.facebook.com/trinhthevils rel=me title=Facebook><svg class="feather"><use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#facebook"/></svg></a><a class=border></a></div><div class=footer-info>2025 © caubechankiu | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer></div></body></html>